# ğŸ“Œ DÃ©finition d'un Service Kubernetes pour exposer l'application "posts"
apiVersion: v1
kind: Service

# ğŸ“Œ MÃ©tadonnÃ©es du Service
metadata:
  name: posts-srv  # ğŸ·ï¸ Nom du Service, utilisÃ© pour le rÃ©fÃ©rencer dans Kubernetes

spec:
  # ğŸ”„ Type du Service : "NodePort" permet d'exposer l'application sur un port du nÅ“ud du cluster,
  # rendant ainsi le service accessible depuis l'extÃ©rieur (ex. via l'IP du nÅ“ud et un port spÃ©cifique).
  type: NodePort

  # ğŸ¯ SÃ©lecteur permettant dâ€™associer ce Service aux pods portant le label "app: posts"
  selector:
    app: posts

  # ğŸ“Œ DÃ©finition des ports par lesquels le Service sera accessible
  ports:
    - name: posts  # Nom du port pour identification interne
      protocol: TCP  # ğŸ“¡ Protocole utilisÃ© pour la communication rÃ©seau (ici TCP)
      port: 4000  # ğŸ“Œ Port sur lequel le Service sera accessible Ã  l'intÃ©rieur du cluster
      targetPort: 4000  # ğŸ¯ Port interne du pod cible (doit correspondre Ã  celui utilisÃ© par lâ€™application)
      # NodePort sera automatiquement attribuÃ© par Kubernetes (par dÃ©faut entre 30000 et 32767)

# ğŸ“ DÃ©brief gÃ©nÃ©ral :
# - Ce fichier YAML dÃ©finit un **Service de type "NodePort"** pour lâ€™application "posts".
#
# - **Service "posts-srv"** :
#   - SÃ©lectionne les pods ayant le label `app: posts`.
#   - Expose ces pods sur le port 4000 **au sein du cluster**.
#   - Rend le service accessible **depuis l'extÃ©rieur** en lui assignant un **port NodePort** (entre 30000 et 32767).
#
# - **DiffÃ©rence avec un Service de type ClusterIP** :
#   - **ClusterIP** : Accessible uniquem
